<ng-container *ngIf="ref" [ngSwitch]="viewOnly">
    <p-dropdown [options]="_options" *ngSwitchCase="false" [appendTo]="anchor" dataKey="id" [(ngModel)]="ref" (ngModelChange)="referenceChanged($event)" [group]="true" [filter]="true" filterBy="value.fixedName,value.variableName">
        <ng-template let-item pTemplate="selectedItem">
          <ng-container *ngIf="item.value">
              <app-entity-bagde [type]="item.value.type"></app-entity-bagde>
              <app-scope-badge *ngIf="item.value.domainInfo" [scope]="item.value.domainInfo.scope" [version]="item.value.domainInfo.version"></app-scope-badge>
              <span *ngIf="item.value.fixedName"> {{item.value.fixedName}}</span><span *ngIf="item.value.variableName">{{ '_' + item.value.variableName}}</span>
          </ng-container>
        </ng-template>
        <ng-template let-item pTemplate="item">
          <app-entity-bagde [type]="item.value.type"></app-entity-bagde>
          <app-scope-badge *ngIf="item.value.domainInfo" [scope]="item.value.domainInfo.scope" [version]="item.value.domainInfo.version"></app-scope-badge>
          <span *ngIf="item.value.fixedName"> {{item.value.fixedName}}</span><span *ngIf="item.value.variableName">{{ '_' + item.value.variableName}}</span>
        </ng-template>
  </p-dropdown>
  <div *ngSwitchCase="true">
    <ng-container *ngIf="selected">
        <app-entity-bagde [type]="selected.type"></app-entity-bagde>
        <app-scope-badge *ngIf="selected.domainInfo" [scope]="selected.domainInfo.scope" [version]="selected.domainInfo.version"></app-scope-badge>
        <span *ngIf="selected.fixedName"> {{selected.fixedName}}</span><span *ngIf="selected.variableName">{{ '_' + selected.variableName}}</span>
      </ng-container>
  </div>
</ng-container>
