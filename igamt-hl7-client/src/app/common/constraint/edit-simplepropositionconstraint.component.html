<div [ngModelGroup]="groupName">
    <div class="ui-g ui-fluid">
        <div class="ui-g-12 ui-md-2">
            <label for="id">ID: </label>
        </div>
        <div class="ui-g-12 ui-md-10">
            <input id="id" name="id" class="form-control" required [(ngModel)]="constraint.identifier" type="text" #id="ngModel"/>
            <div *ngIf="id.invalid && (id.dirty || id.touched)" class="alert alert-danger">
                <div *ngIf="id.errors.required">
                    ID is required.
                </div>
            </div>
        </div>
    </div>

    <!--<div class="ui-g ui-fluid">-->
        <!--<div class="ui-g-12 ui-md-2">-->
            <!--<label for="desc">Description: </label>-->
        <!--</div>-->
        <!--<div class="ui-g-12 ui-md-10">-->
            <!--<input id="desc" name="desc" class="form-control" required [(ngModel)]="assertion.description" type="text" #desc="ngModel"/>-->
        <!--</div>-->
    <!--</div>-->

    <strong>Proposition:</strong>
    <table class="table constraint-table" style="width: 100%;">
        <tr style="background-color: #a7d6a9;">
            <td align="center" *ngIf="needTargetOccurence">
                <strong>Target Occurrence Declarative Statement</strong>
            </td>
            <td align="center">
                <strong>Target Node Location</strong>
            </td>
            <td align="center">
                <strong>Verb</strong>
            </td>
            <td align="center">
                <strong>Content Declarative Statement</strong>
            </td>
        </tr>

        <tr style="background-color: #f6f6f6;">
            <td align="center" *ngIf="needPTargetOccurence">
                <div *ngIf="targetPOccurenceType === 'atLeast'">
                    At least one occurrence of
                </div>

                <div *ngIf="targetPOccurenceType === 'instance'">
                    The '<input id="{{groupName}}-target-occurence" name="{{groupName}}-target-occurence" required [(ngModel)]="targetPOccurenceValue" type="text" #targetoccurence="ngModel"/>' occurrence of
                </div>

                <div *ngIf="targetPOccurenceType === 'noOccurrence'">
                    No occurrence of
                </div>

                <div *ngIf="targetPOccurenceType === 'exactlyOne'">
                    Exactly one occurrence of
                </div>

                <div *ngIf="targetPOccurenceType === 'count'">
                    '<input id="{{groupName}}-target-occurence" name="{{groupName}}-target-occurence" required [(ngModel)]="targetPOccurenceValue" type="text" #targetoccurence="ngModel"/>' occurrences of
                </div>

                <div *ngIf="targetPOccurenceType === 'all'">
                    All occurrences of
                </div>
            </td>
            <td align="center">
                {{getLocationLabel(ifAssertion.subject, 'TARGET')}}
            </td>
            <td align="center">{{ifAssertion.verbKey}}</td>
            <td align="center">

            </td>
        </tr>

        <tr class="small-content">
            <td *ngIf="needTargetOccurence">
                <div class="ui-g">
                    For repeatable '{{targetOccurenceLocationStr}}':
                    <div class="ui-g-12" *ngFor="let occurenceType of occurenceTypes">
                        <p-radioButton name="{{groupName}}-targetCccurenceType" [value]="occurenceType.value" [label]="occurenceType.label" [(ngModel)]="targetPOccurenceType"></p-radioButton>
                    </div>
                </div>
            </td>
            <td>
                <app-cs-segment-tree [tree]="structure" [selectComplex]="false" (select)="selectPTargetElementLocation($event)"></app-cs-segment-tree>
            </td>
            <td *ngIf="needContext">Context</td>
            <td>
                <div class="ui-g">
                    <div class="ui-g-12" *ngFor="let verb of verbs">
                        <p-radioButton name="{{groupName}}-verb" [value]="verb.value" [label]="verb.label" [(ngModel)]="ifAssertion.verbKey"></p-radioButton>
                    </div>
                </div>
            </td>
            <td>
                <div class="ui-g">
                    <div class="ui-g-12" *ngFor="let propositionType of propositionTypes">
                        <p-radioButton name="{{groupName}}-propositionType" [value]="propositionType.value" [label]="propositionType.label" [(ngModel)]="ifAssertion.complement.complementKey"></p-radioButton>
                    </div>
                </div>
            </td>
        </tr>

    </table>
    <strong>Statement:</strong>
    <table class="table constraint-table" style="width: 100%;">
        <tr style="background-color: #a7d6a9;">
            <td align="center" *ngIf="needTargetOccurence">
                <strong>Target Occurrence Declarative Statement</strong>
            </td>
            <td align="center">
                <strong>Target Node Location</strong>
            </td>
            <td align="center" *ngIf="needContext">
                <strong>Context</strong>
            </td>
            <td align="center">
                <strong>Verb</strong>
            </td>
            <td align="center">
                <strong>Content Declarative Statement</strong>
                <p-radioButton name="{{groupName}}-Declarative-Type" [value]="false" label="Value" [(ngModel)]="needComparison"></p-radioButton>
                <p-radioButton name="{{groupName}}-Declarative-Type" [value]="true" label="Comparison" [(ngModel)]="needComparison"></p-radioButton>
            </td>
            <td align="center" *ngIf="needComparison && needCompareOccurence">
                <strong>Comparison Occurrence Declarative Statement</strong>
            </td>
            <td align="center" *ngIf="needComparison">
                <strong>Comparison node Location</strong>
            </td>
        </tr>

        <tr style="background-color: #f6f6f6;">
            <td align="center" *ngIf="needTargetOccurence">
                <div *ngIf="targetOccurenceType === 'atLeast'">
                    At least one occurrence of
                </div>

                <div *ngIf="targetOccurenceType === 'instance'">
                    The '<input id="{{groupName}}-target-occurence" name="{{groupName}}-target-occurence" required [(ngModel)]="targetOccurenceValue" type="text" #targetoccurence="ngModel"/>' occurrence of
                </div>

                <div *ngIf="targetOccurenceType === 'noOccurrence'">
                    No occurrence of
                </div>

                <div *ngIf="targetOccurenceType === 'exactlyOne'">
                    Exactly one occurrence of
                </div>

                <div *ngIf="targetOccurenceType === 'count'">
                    '<input id="{{groupName}}-target-occurence" name="{{groupName}}-target-occurence" required [(ngModel)]="targetOccurenceValue" type="text" #targetoccurence="ngModel"/>' occurrences of
                </div>

                <div *ngIf="targetOccurenceType === 'all'">
                    All occurrences of
                </div>
            </td>
            <td align="center">
                {{getLocationLabel(thenAssertion.subject, 'TARGET')}}
            </td>
            <td *ngIf="needContext" align="center">Context</td>
            <td align="center">{{thenAssertion.verbKey}}</td>
            <td align="center">
                <div *ngIf="thenAssertion.complement.complementKey === 'c-identical'">
                    be identical to
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'c-earlier'">
                    be earlier than
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'c-earlier-equivalent'">
                    be earlier than or equivalent to
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'c-truncated-earlier'">
                    be truncated earlier than
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'c-truncated-earlier-equivalent'">
                    be truncated earlier than or truncated equivalent to
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'c-equivalent'">
                    be equivalent to
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'c-truncated-equivalent'">
                    be truncated equivalent to
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'c-equivalent-later'">
                    be equivalent to or later than
                </div>
                <div *ngIf="thenAssertion.complement.complementKey === 'c-later'">
                    be later than
                </div>
                <div *ngIf="thenAssertion.complement.complementKey === 'c-truncated-equivalent-later'">
                    be truncated equivalent to or truncated later than
                </div>
                <div *ngIf="thenAssertion.complement.complementKey === 'c-truncated-later'">
                    be truncated later than
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'containtValue'">
                    contain the value '<input id="{{groupName}}-complement.value" name="{{groupName}}-complement.value" required [(ngModel)]="thenAssertion.complement.value" type="text" #value="ngModel"/>'.
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'containValueDesc'">
                    contain the value '<input id="{{groupName}}-complement.value" name="{{groupName}}-complement.value" required [(ngModel)]="thenAssertion.complement.value" type="text" #value="ngModel"/>' (<input id="{{groupName}}-complement.desc" name="{{groupName}}-complement.desc" required [(ngModel)]="thenAssertion.complement.desc" type="text" #valueDesc="ngModel"/>).
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'containCode'">
                    contain the value '<input id="{{groupName}}-complement.value" name="{{groupName}}-complement.value" required [(ngModel)]="thenAssertion.complement.value" type="text" #value="ngModel"/>' drawn from the code system '<input id="{{groupName}}-complement.codesys" name="{{groupName}}-complement.codesys" required [(ngModel)]="thenAssertion.complement.codesys" type="text" #codesys="ngModel"/>'.
                </div>

                <div *ngIf="thenAssertion.complement.complementKey === 'containListValues'">
                    <!--contain one of the values in the list: [ <div *ngIf="assertion.complement && assertion.complement.values"><input *ngFor="let childValue of assertion.complement.values; let idx = index;" id="{{groupName}}-complement.value-{{idx}}" name="{{groupName}}-complement.value-{{idx}}" required [(ngModel)]="childValue" type="text"/></div> <i class="fa fa-plus" (click)="addListValue(assertion.complement.values)"></i>].-->
                </div>

                <!--<div *ngIf="assertion.complement.complementKey === 'containListCodes'">-->
                    <!--contain one of the values in the list: { <span *ngFor="let childValue of assertion.complement.values; let idx = index">'<input id="{{groupName}}-complement.value-{{idx}}" name="{{groupName}}-complement.value-{{idx}}" required [(ngModel)]="childValue" type="text" #desc="ngModel"/>'</span> <i class="fa fa-plus" (click)="addListValue(assertion.complement.values)"></i> } drawn from the code system '<input id="{{groupName}}-complement.codesys" name="{{groupName}}-complement.codesys" required [(ngModel)]="assertion.complement.codesys" type="text" #desc="ngModel"/>'.-->
                <!--</div>-->
                <div *ngIf="thenAssertion.complement.complementKey === 'regex'">
                    match the regular expression '<input id="{{groupName}}-complement.value" name="{{groupName}}-complement.value" required [(ngModel)]="thenAssertion.complement.value" type="text" #value="ngModel"/>'.
                </div>
                <div *ngIf="thenAssertion.complement.complementKey === 'positiveInteger'">
                    contain a positive integer.
                </div>
                <div *ngIf="thenAssertion.complement.complementKey === 'sequentially'">
                    be valued sequentially starting with the value '1'.
                </div>
                <div *ngIf="thenAssertion.complement.complementKey === 'iso'">
                    be valued with an ISO-compliant OID.
                </div>


            </td>
            <td *ngIf="needCompareOccurence" align="center">
                <div *ngIf="compareOccurenceType === 'atLeast'">
                    At least one occurrence of
                </div>

                <div *ngIf="compareOccurenceType === 'instance'">
                    The '<input id="{{groupName}}-compare-occurence" name="{{groupName}}-compare-occurence" required [(ngModel)]="compareOccurenceValue" type="text" #compareoccurence="ngModel"/>' occurrence of
                </div>

                <div *ngIf="compareOccurenceType === 'noOccurrence'">
                    No occurrence of
                </div>

                <div *ngIf="compareOccurenceType === 'exactlyOne'">
                    Exactly one occurrence of
                </div>

                <div *ngIf="compareOccurenceType === 'count'">
                    '<input id="{{groupName}}-compare-occurence" name="{{groupName}}-compare-occurence" required [(ngModel)]="compareOccurenceValue" type="text" #compareoccurence="ngModel"/>' occurrences of
                </div>

                <div *ngIf="compareOccurenceType === 'all'">
                    All occurrences of
                </div>
            </td>
            <td *ngIf="needComparison" align="center">
                {{getLocationLabel(thenAssertion.complement, 'COMPARE')}}
            </td>
        </tr>

        <tr class="small-content">
            <td *ngIf="needTargetOccurence">
                <div class="ui-g">
                    For repeatable '{{targetOccurenceLocationStr}}':
                    <div class="ui-g-12" *ngFor="let occurenceType of occurenceTypes">
                        <p-radioButton name="{{groupName}}-targetCccurenceType" [value]="occurenceType.value" [label]="occurenceType.label" [(ngModel)]="targetOccurenceType"></p-radioButton>
                    </div>
                </div>
            </td>
            <td>
                <app-cs-segment-tree [tree]="structure" [selectComplex]="false" (select)="selectTargetElementLocation($event)"></app-cs-segment-tree>
            </td>
            <td *ngIf="needContext">Context</td>
            <td>
                <div class="ui-g">
                    <div class="ui-g-12" *ngFor="let verb of verbs">
                        <p-radioButton name="{{groupName}}-verb" [value]="verb.value" [label]="verb.label" [(ngModel)]="thenAssertion.verbKey"></p-radioButton>
                    </div>
                </div>
            </td>
            <td>
                <div *ngIf="!needComparison" class="ui-g">
                    <div class="ui-g-12" *ngFor="let declarativeType of declarativeTypes">
                        <p-radioButton name="{{groupName}}-declarativeType" [value]="declarativeType.value" [label]="declarativeType.label" (onChange)="changeDeclarativeType()" [(ngModel)]="thenAssertion.complement.complementKey"></p-radioButton>
                    </div>
                </div>
                <div *ngIf="needComparison" class="ui-g">
                    <div class="ui-g-12" *ngFor="let declarativeCType of declarativeCTypes">
                        <p-radioButton name="{{groupName}}-declarativeCType" [value]="declarativeCType.value" [label]="declarativeCType.label" [(ngModel)]="thenAssertion.complement.complementKey"></p-radioButton>
                    </div>
                </div>
            </td>
            <td *ngIf="needCompareOccurence">
                <div class="ui-g">
                    For repeatable '{{compareOccurenceLocationStr}}':
                    <div class="ui-g-12" *ngFor="let occurenceType of occurenceTypes">
                        <p-radioButton name="{{groupName}}-compareOccurenceType" [value]="occurenceType.value" [label]="occurenceType.label" [(ngModel)]="compareOccurenceType"></p-radioButton>
                    </div>
                </div>
            </td>
            <td *ngIf="needComparison">
                <app-cs-segment-tree [tree]="structure" [selectComplex]="false" (select)="selectComparisonElementLocation($event)"></app-cs-segment-tree>
            </td>
        </tr>

    </table>

    <!--<p-fieldset legend="Advanced Fields" [toggleable]="true" collapsed="true">-->
        <!--<div class="ui-g ui-fluid">-->
            <!--<div class="ui-g-12 ui-md-2">-->
                <!--<label for="assertionScript">Assertion Script: </label>-->
            <!--</div>-->

            <!--<div class="ui-g-12 ui-md-10">-->
                <!--<textarea id="assertionScript" name="assertionScript" class="form-control" [(ngModel)]="assertion.script" pInputTextarea [(ngModel)]="property"></textarea>-->
            <!--</div>-->
        <!--</div>-->
    <!--</p-fieldset>-->
</div>